{"version":3,"sources":["components/PersonForm.js","components/Person.js","components/Persons.js","components/Filter.js","components/Notification.js","services/PersonService.js","App.js","index.js"],"names":["PersonForm","props","onSubmit","addPerson","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Person","person","deletePerson","name","number","onClick","id","Persons","persons","map","key","Filter","filterName","handleFilter","Notification","msg","startsWith","className","url","axios","get","then","response","data","newPerson","post","delete","idd","updatedPerson","request","put","console","log","App","useState","setPersons","setNewName","setNewNumber","setFilterName","showAll","setShowAll","notifMsg","setNotifMsg","useEffect","personService","initNotes","personsToShow","filter","toLowerCase","includes","event","target","preventDefault","lastId","Math","max","apply","personObject","find","window","confirm","indexOfExisting","findIndex","idOfExisting","oldNameNewNumber","tempPers","splice","setTimeout","alert","returnedObject","concat","catch","error","newPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2f7f5031.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst PersonForm = (props) => {\r\n    return (\r\n    <form onSubmit= {props.addPerson}>\r\n        <div>name: <input value={props.newName} onChange={props.handleNameChange}/></div>\r\n        <div>number: <input value={props.newNumber} onChange={props.handleNumberChange}/></div>\r\n        <div><button type=\"submit\">add</button></div>\r\n    </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Person = ({person, deletePerson}) => {\r\n    return (\r\n    <li>{person.name} {person.number}<button onClick={() => deletePerson(person.id, person.name)}>delete</button></li>\r\n    )\r\n  }\r\n\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nconst Persons = ({persons, deletePerson}) => {\r\n    return (\r\n      persons.map((person) => <Person key={person.name} person={person} deletePerson={deletePerson}/>)\r\n    )\r\n  }\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n    return (\r\n        <div>Filter shown with Name:\r\n             <input value={props.filterName} onChange={props.handleFilter}>\r\n                 </input></div>\r\n    )\r\n} \r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Notification = ({ msg }) => {\r\n    if (msg === null) {\r\n        return null\r\n    } else if (msg.startsWith('Error')) {\r\n        return (\r\n            <div className=\"error\">\r\n                {msg}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"notif\">\r\n            {msg}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\nconst url = '/api/persons'\r\n\r\nconst getPersons = () => {\r\n    const request = axios.get(url)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst createPerson = newPerson => {\r\n    const request = axios.post(url, newPerson)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = id => {\r\n    const request = axios.delete(`${url}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst putNumber = (idd, updatedPerson) => {\r\n    const request = axios.put(`${url}/${idd}`, {\r\n        name: updatedPerson.name,\r\n        number: updatedPerson.number,\r\n        id: updatedPerson.id\r\n    })\r\n    console.log('putNumber called into id: ', updatedPerson.id)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getPersons, createPerson, deletePerson, putNumber }","import React, { useState, useEffect } from 'react'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport Filter from './components/Filter'\r\nimport Notification from './components/Notification'\r\nimport personService from './services/PersonService'\r\n\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([\r\n    /*{ name: 'Arto Hellas', number: '040-123456' },\r\n    { name: 'Ada Lovelace', number: '39-44-5323523' },\r\n    { name: 'Dan Abramov', number: '12-43-234345' },\r\n    { name: 'Mary Poppendieck', number: '39-23-6423122' } */\r\n  ]) \r\n\r\n  const [ newName, setNewName ] = useState('test')\r\n  const [ newNumber, setNewNumber ] = useState('123123')\r\n  const [ filterName, setFilterName ] = useState('')\r\n  const [ showAll, setShowAll] = useState(true)\r\n  const [ notifMsg, setNotifMsg ] = useState(null)\r\n\r\n  useEffect(() => {\r\n    console.log('effect hook')\r\n    personService\r\n      .getPersons()\r\n      .then(initNotes => { setPersons(initNotes) })\r\n  }\r\n  , [])\r\n\r\n  // Handles showAll when filterName changes --> solve \"one-step-behind\" filter problem\r\n  useEffect(() => {\r\n    console.log('useEffect for filterName')\r\n    if (filterName !== '' && showAll === true) {setShowAll(!showAll)}\r\n    if (filterName === '' && showAll === false) {setShowAll(!showAll)}\r\n  }, [filterName, showAll])\r\n\r\n  const personsToShow = showAll \r\n  ? persons \r\n  : persons.filter(person => person.name.toLowerCase().includes(filterName.toLowerCase())) \r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    console.log('button clicked', event.target)\r\n\r\n    const lastId = Math.max.apply(null, persons.id)\r\n    const newId = lastId + 1\r\n\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n      id: newId\r\n    }\r\n\r\n    if (persons.find( ({name}) => name === newName)) {\r\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n        const indexOfExisting = persons.findIndex(person => person.name === newName)\r\n        const idOfExisting = persons[indexOfExisting].id\r\n        console.log('idOfExisting: ', idOfExisting)\r\n\r\n        const oldNameNewNumber = {\r\n          name: personObject.name,\r\n          number: personObject.number,\r\n          id: idOfExisting\r\n        }\r\n\r\n        personService\r\n          .putNumber(idOfExisting, oldNameNewNumber)\r\n          .then(() => {\r\n            const tempPers = persons\r\n            tempPers.splice(indexOfExisting, 1, oldNameNewNumber)\r\n            setPersons(tempPers)\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setNotifMsg(`Modified ${oldNameNewNumber.name}'s number to: ${oldNameNewNumber.number}`)\r\n            setTimeout(() => {\r\n              setNotifMsg(null)\r\n            }, 2000)\r\n          })  \r\n      }\r\n    }\r\n    else if (persons.find( ({number}) => number === newNumber)){\r\n      window.alert(`${newNumber} is already added to phonebook`)\r\n    }\r\n    else {\r\n      personService\r\n        .createPerson(personObject)\r\n        .then(returnedObject => { \r\n          setPersons(persons.concat(returnedObject))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setNotifMsg(`Added ${returnedObject.name}`)\r\n          setTimeout(() => {\r\n            setNotifMsg(null)\r\n          }, 2000)\r\n        })\r\n        .catch( error => {\r\n          setNotifMsg(`Error: ${error.response.data.error}`)\r\n          setTimeout(() => {\r\n            setNotifMsg(null)\r\n          }, 2000)\r\n        })\r\n    }\r\n  }\r\n\r\n  const deletePerson = (id, name) => {\r\n    if (window.confirm(`Delete ${name}?`)) {\r\n      personService\r\n      .deletePerson(id)\r\n      .then( () => {\r\n        const newPersons = persons.filter(person => person.id !== id)\r\n        setPersons(newPersons)\r\n        setNotifMsg(`Succesfully deleted ${name}`)\r\n        setTimeout(() => {\r\n          setNotifMsg(null)\r\n        }, 2000)\r\n      })\r\n    }\r\n  }\r\n \r\n  const handleNameChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilter = (event) => {\r\n    setFilterName(event.target.value) \r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification msg={notifMsg}/>\r\n      <Filter filterName={filterName} handleFilter={handleFilter}/>\r\n      <h2>Add new person</h2>\r\n      <PersonForm addPerson={addPerson} newName={newName}\r\n       handleNameChange={handleNameChange} newNumber={newNumber} \r\n       handleNumberChange={handleNumberChange}/>\r\n      <h2>Numbers</h2>\r\n      <Persons persons={personsToShow} deletePerson={deletePerson}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}